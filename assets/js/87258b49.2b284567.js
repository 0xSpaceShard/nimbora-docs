"use strict";(self.webpackChunknimbora_yield_dex=self.webpackChunknimbora_yield_dex||[]).push([[1452],{8501:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>i,default:()=>l,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var a=n(4848),r=n(8453);const s={id:"withdraw",title:"Withdrawing from strategy",sidebar_position:4},i=void 0,o={id:"sdks/sdk/guides/withdraw",title:"Withdrawing from strategy",description:"A withdrawal involves transferring assets from the Layer 2 Token Manager contract on the Starknet network to the Ethereum mainnet. This is a two-step operation.",source:"@site/docs/sdks/sdk/guides/withdrawing_strategy.md",sourceDirName:"sdks/sdk/guides",slug:"/sdks/sdk/guides/withdraw",permalink:"/docs/sdks/sdk/guides/withdraw",draft:!1,unlisted:!1,editUrl:"https://github.com/0xSpaceShard/nimbora_yields_l2/docs/sdks/sdk/guides/withdrawing_strategy.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"withdraw",title:"Withdrawing from strategy",sidebar_position:4},sidebar:"sdkSidebar",previous:{title:"Depositing into strategy",permalink:"/docs/sdks/sdk/guides/deposit"},next:{title:"Overview",permalink:"/docs/sdks/sdk/technical_references/overview"}},h={},c=[{value:"Request Withdrawal",id:"request-withdrawal",level:3},{value:"Claim Withdrawal",id:"claim-withdrawal",level:3}];function d(e){const t={admonition:"admonition",code:"code",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"A withdrawal involves transferring assets from the Layer 2 Token Manager contract on the Starknet network to the Ethereum mainnet. This is a two-step operation."}),"\n",(0,a.jsxs)(t.p,{children:["First, you call the ",(0,a.jsx)(t.code,{children:"requestWithdrawal"})," function, specifying the number of shares to be converted back into Ethereum tokens. These shares reflect the balance in the Token Manager contract."]}),"\n",(0,a.jsxs)(t.p,{children:["After the withdrawal request is processed and finalized on the StarkNet network, you can claim the withdrawal by calling the ",(0,a.jsx)(t.code,{children:"claimWithdrawal"})," function which moves the tokens back to your Ethereum account."]}),"\n",(0,a.jsx)(t.admonition,{type:"info",children:(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.strong,{children:"Underlying"})," asset represent the tokens users will use to deposit within a strategy. For example, the underlying token for the nsDai strategy is DAI."]})}),"\n",(0,a.jsx)(t.h3,{id:"request-withdrawal",children:"Request Withdrawal"}),"\n",(0,a.jsxs)(t.p,{children:["To make a withdrawal request from the token manager, users need to invoke the ",(0,a.jsx)(t.code,{children:"requestWithdrawal"})," function. This function requires the user to specify the amount of shares they wish to exchange for the underlying tokens."]}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"requestWithdrawal"})," function is part of the Token Manager's smart contract, which manages the transfer of tokens between the layer 2 StarkNet network and the Ethereum mainnet. The shares represent a user's balance in the Token Manager contract."]}),"\n",(0,a.jsxs)(t.p,{children:["When a user calls the ",(0,a.jsx)(t.code,{children:"requestWithdrawal"})," function, they are effectively initiating a process to convert their shares back into the equivalent amount of tokens on the Ethereum mainnet."]}),"\n",(0,a.jsx)(t.p,{children:"This process is crucial for users who want to move their assets out of the StarkNet network and back to the Ethereum mainnet."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'...\ntry {\n    const { id, hash } = await tokenManager.requestWithdrawal({\n        shares: "100", // Total shares to exchange for the underlying token.\n        onTxStageChange: txStageChangeCallback, // Optional callback for getting information about transaction stage.\n    })\n} catch (e) {\n    // Handle Errors\n}\n'})}),"\n",(0,a.jsx)(t.h3,{id:"claim-withdrawal",children:"Claim Withdrawal"}),"\n",(0,a.jsxs)(t.p,{children:["Claiming a withdrawal from a token manager involves several steps. Initially, the user has to call the ",(0,a.jsx)(t.code,{children:"claimWithdrawal"})," function, which facilitates the entire process."]}),"\n",(0,a.jsx)(t.p,{children:"This function helps in retrieving the tokens that have been previously requested for withdrawal from the Layer 2 Token Manager contract back to the Ethereum mainnet. It's important to note that this can only be done once the withdrawal request has been processed and finalized on the StarkNet network."}),"\n",(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.code,{children:"claimWithdrawal"})," function requires the ID of the withdrawal request as a parameter, which is generated when the ",(0,a.jsx)(t.code,{children:"requestWithdrawal"})," function is called."]}),"\n",(0,a.jsxs)(t.p,{children:["After the ",(0,a.jsx)(t.code,{children:"claimWithdrawal"})," function has been successfully executed, the tokens are transferred back to the user's Ethereum account."]}),"\n",(0,a.jsx)(t.p,{children:"It's a crucial step for users who wish to transfer their assets from the StarkNet network back to the Ethereum mainnet."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:'...\ntry {\n    const hash = await tokenManager.claimWithdrawal({\n        claimWithdrawal: "1", // The request withdrawal id.\n        onTxStageChange: txStageChangeCallback, // Optional callback for getting information about transaction stage.\n    })\n} catch (e) {\n    // Handle Errors\n}\n'})})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>o});var a=n(6540);const r={},s=a.createContext(r);function i(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);