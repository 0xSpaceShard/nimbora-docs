"use strict";(self.webpackChunknimbora_yield_dex=self.webpackChunknimbora_yield_dex||[]).push([[882],{9230:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>o,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var s=r(4848),n=r(8453);const i={id:"create_strategy",title:"How to create new strategies",sidebar_position:3},d="Deploying and Interacting with Strategies",c={id:"contracts/guides/create_strategy",title:"How to create new strategies",description:"This guide will walk you through the process of deploying a new strategy and interacting with it.",source:"@site/docs/contracts/guides/03-create-strategy.md",sourceDirName:"contracts/guides",slug:"/contracts/guides/create_strategy",permalink:"/docs/contracts/guides/create_strategy",draft:!1,unlisted:!1,editUrl:"https://github.com/0xSpaceShard/nimbora_yields_l2/docs/contracts/guides/03-create-strategy.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"create_strategy",title:"How to create new strategies",sidebar_position:3},sidebar:"contractsSidebar",previous:{title:"L2 Contracts",permalink:"/docs/contracts/guides/l2-contracts"},next:{title:"Reports",permalink:"/docs/contracts/guides/reports"}},a={},h=[{value:"Create new strategy",id:"create-new-strategy",level:2},{value:"User interaction",id:"user-interaction",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"deploying-and-interacting-with-strategies",children:"Deploying and Interacting with Strategies"}),"\n",(0,s.jsx)(t.p,{children:"This guide will walk you through the process of deploying a new strategy and interacting with it.\nWe'll use sDAI as the L1 strategy and DAI as the underlying token."}),"\n",(0,s.jsx)(t.h2,{id:"create-new-strategy",children:"Create new strategy"}),"\n",(0,s.jsxs)(t.p,{children:["To create new strategies you can interact directly with the ",(0,s.jsx)(t.a,{href:"https://starkscan.co/contract/0x06c1658299633f8d52069985421ab2717c8a4c2a6d1bdfe58532b760aeec9e0d",children:"L2 Factory contract"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Use ",(0,s.jsx)(t.code,{children:"deploy_strategy"})," method to create your new strategy on L2. This is how the function interface looks like:"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Args"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"l1_strategy"})}),(0,s.jsx)(t.td,{children:"L1 address for your strategy"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"underlying"})}),(0,s.jsx)(t.td,{children:"asset users will use to interact with the strategy"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"token_name"})}),(0,s.jsx)(t.td,{children:"name of the yield-bearing token"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"token_symbol"})}),(0,s.jsx)(t.td,{children:"simbol for the yield-bearing token"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"performance_fees"})}),(0,s.jsx)(t.td,{children:"fees preceibed by the contract"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"min_deposit"})}),(0,s.jsx)(t.td,{children:"minimum amount users can deposit"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"max_deposit"})}),(0,s.jsx)(t.td,{children:"maximum amount users can deposit"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"min_withrawal"})}),(0,s.jsx)(t.td,{children:"minimum amount users can withdraw"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"max_deposit"})}),(0,s.jsx)(t.td,{children:"maximum amount users can withdraw"})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"This function will return you the token manager and the ERC20 yield-bearing token."}),"\n",(0,s.jsx)(t.h2,{id:"user-interaction",children:"User interaction"}),"\n",(0,s.jsx)(t.p,{children:"In order to interac with the strategy, users will deposit the underlying token using the token manager smart contract. Then, they will consult their balances using the underlying yield-bearer token."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"Deposit"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Args"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"assets"})}),(0,s.jsx)(t.td,{children:"amount user wants to deposit within the strategy"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"receiver"})}),(0,s.jsx)(t.td,{children:"address to receive the minted shares"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"referal"})}),(0,s.jsx)(t.td,{children:"referral address for the deposit"})]})]})]}),"\n",(0,s.jsxs)(t.p,{children:["Users can withdraw their deposits by using the ",(0,s.jsx)(t.code,{children:"request_withdrawal"})," method on first instance."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"Request Withdrawal"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Args"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"shares"})}),(0,s.jsx)(t.td,{children:"amount of shares to be withdrawn by the user"})]})})]}),"\n",(0,s.jsxs)(t.p,{children:["Then, a withdrawal petition will be sent to the Pooling Manager contract to fetch the assets from the L1 strategy. Once the assets are bridged to L2, the user will be able to ",(0,s.jsx)(t.code,{children:"claim_withdrawal"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"Claim Withdrawal"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Args"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"id"})}),(0,s.jsx)(t.td,{children:"withdraw id to be claimed"})]})})]}),"\n",(0,s.jsx)(t.p,{children:"As you can deduct from the previously described withdraw mechanism, the assets will take some time to get bridged to L2 and transferred to the user's wallet."}),"\n",(0,s.jsxs)(t.p,{children:["In order to keep track of the withdrawal request, users can use ",(0,s.jsx)(t.code,{children:"withdrawal_info"})," to fetch the withdrawal status."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.code,{children:"Withdrawal Info"})}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Args"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"user"})}),(0,s.jsx)(t.td,{children:"user's contract address"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"id"})}),(0,s.jsx)(t.td,{children:"withdrawal id"})]})]})]})]})}function o(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,t,r)=>{r.d(t,{R:()=>d,x:()=>c});var s=r(6540);const n={},i=s.createContext(n);function d(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);